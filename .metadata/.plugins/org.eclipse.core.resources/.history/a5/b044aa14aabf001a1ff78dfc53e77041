import java.net.URI;
import java.net.http.*;
import java.net.http.HttpResponse.BodyHandlers;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

import org.json.*;

public class dp {

	public static void main(String[] args) throws Exception {
		httprequester();
		// TODO Auto-generated method stub

	}	
	private static void httprequester() throws Exception {
		HttpClient cp = HttpClient.newHttpClient();
		HttpRequest r = HttpRequest.newBuilder().uri(URI.create("https://covidtracking.com/api/us/daily")).build();
		HttpResponse<String> response = cp.send(r, BodyHandlers.ofString());
	    System.out.println(response.body());
	    JSONparser2(response.body());
	}
	
	private static void JSONparser(String response)  throws Exception {
		
		JSONArray array = new JSONArray(response);
		
		for (int i = 0; i<array.length(); i++) {
			JSONObject object = array.getJSONObject(i);
			Iterator<String> keys = object.keys();
			while (keys.hasNext()) {
				String key = (String) keys.next();
				String value = object.get(key).toString();
				System.out.println(key + ": " + value);
			}
		}
	}
	
	private static void JSONparser2(String response)  throws Exception {
		
		JSONArray array = new JSONArray(response);
		
		for (int i = 0; i<array.length(); i++) {
			JSONObject object = array.getJSONObject(i);
			Iterator<String> keys = object.keys();
			ArrayList<ArrayList<Object>> listOfLists = new ArrayList<ArrayList<Object>>();
			ArrayList<String> topRow = new ArrayList<String>();
			while (keys.hasNext()) {
				String key = (String) keys.next();
				String value = object.get(key).toString();
				if (topRow.contains(key) == false) {
					topRow.add(key);
				}
			}
			for(int j = 0; j<topRow.size(); j++) {
				System.out.print(topRow.get(j));
			}
		}
	}

}
